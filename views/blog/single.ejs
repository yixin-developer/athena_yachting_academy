

<%
  // declare once at the top
  const p = post;
  const title = p.seometatitle || `${p.title} â€” Athena Yachting Academy`; 
  const description = p.seometadescription || p.excerpt || 'Learn about sailing, RYA courses, and yachting adventures in Greece with Athena Yachting Academy.';
  const imgUrl = p.featuredimage?.url 
    ? `${process.env.CMS_BASE || 'http://localhost:1337'}${p.featuredimage.url}` 
    : null;
%>

<!doctype html>
<html lang="en">
  <head>
    <title><%= title %></title>
    <meta name="description" content="<%= description %>">
    <% if (imgUrl) { %>
      <meta property="og:image" content="<%= imgUrl %>">
    <% } %>
    <meta property="og:title" content="<%= title %>">
    <meta property="og:description" content="<%= description %>">
    <meta property="og:type" content="article">
    <%- include('../partials/header') %>
  </head>

  <body>
    <div class="container py-5">
      <a href="/blog" class="text-decoration-none text-secondary small">&larr; Back to Blog</a>

      <article class="mt-3">
        <h1 class="fw-bold mb-3"><%= p.title %></h1>

        <% if (p.publisheddate) { %>
          <p class="text-muted small mb-4">
            <i>Published on <%= new Date(p.publisheddate).toLocaleDateString('en-GB', { year: 'numeric', month: 'long', day: 'numeric' }) %></i>
          </p>
        <% } %>

        <% if (imgUrl) { %>
          <img src="<%= imgUrl %>" alt="<%= p.title %>" class="img-fluid rounded mb-4 shadow-sm">
        <% } %>

        <% if (htmlContent) { %>
          <div class="blog-content">
            <%- htmlContent %>
          </div>
        <% } else { %>
          <p class="text-muted">This post has no content yet.</p>
        <% } %>
      </article>
    </div>

    <%- include('../partials/footer') %>
  </body>
</html>